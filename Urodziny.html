<!DOCTYPE html>
<html lang="pl">
<head>
    <title>Urodziny</title>
    <meta charset="utf-8">
</head>
<body>
    <div id="naglowek">
        <h1>Za ile mam urodziny?</h1>
    </div>

    <div id="main">
        <label>Podaj swoją datę urodzin (DD-MM):</label><br>
        <input type="text" id="dataUrodzin" placeholder="np. 15-04" size="10"><br><br>

        <label>Do urodzin zostało:</label><br>
        <input type="text" id="Uro" readonly size="20">
    </div>

    <script>
        function odliczanieUrodzin() {
            var input = document.getElementById("dataUrodzin").value;

            if (input.trim() === "") {
                document.getElementById("Uro").value = "";
                setTimeout(odliczanieUrodzin, 1000);
                return;
            }

            // Oczekiwany format: DD-MM
            var frag = input.split("-");
            if (frag.length !== 2) {
                document.getElementById("Uro").value = "Zły format!";
                setTimeout(odliczanieUrodzin, 1000);
                return;
            }

            var dzien = parseInt(frag[0]);
            var miesiac = parseInt(frag[1]) - 1; // miesiące w JS liczone 0–11

            var teraz = new Date();
            var rokTeraz = teraz.getFullYear();

            // Tworzymy datę urodzin w tym roku
            var cel = new Date(rokTeraz, miesiac, dzien, 0, 0, 0);

            // Jeśli urodziny już minęły – liczymy do następnego roku
            if (teraz > cel) {
                cel = new Date(rokTeraz + 1, miesiac, dzien, 0, 0, 0);
            }

            var roznica = cel - teraz;

            var sek = Math.floor(roznica / 1000);
            var min = Math.floor(sek / 60);
            var godz = Math.floor(min / 60);
            var dni = Math.floor(godz / 24);

            sek %= 60;
            min %= 60;
            godz %= 24;

            var wynik =
                dni + " dni " +
                (godz < 10 ? "0" : "") + godz + ":" +
                (min < 10 ? "0" : "") + min + ":" +
                (sek < 10 ? "0" : "") + sek;

            document.getElementById("Uro").value = wynik;

            setTimeout(odliczanieUrodzin, 1000);
        }

        odliczanieUrodzin();
    </script>
</body>
</html>
